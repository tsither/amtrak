
% Track type 1
track_option(32800,(n,move_forward,n)).
track_option(32800,(n,wait,n)).
track_option(32800,(s,move_forward,s)).
track_option(32800,(s,wait,s)).

track_option(1025,(e,move_forward,e)).
track_option(1025,(e,wait,e)).
track_option(1025,(w,move_forward,w)).
track_option(1025,(w,wait,w)).

track_option(4608,(n,move_forward,w)).
track_option(4608,(n,wait,w)).
track_option(4608,(e,move_forward,s)).
track_option(4608,(e,wait,s)).

track_option(16386,(n,move_forward,e)).
track_option(16386,(n,wait,e)).
track_option(16386,(w,move_forward,s)).
track_option(16386,(w,wait,s)).

track_option(72,(s,move_forward,e)).
track_option(72,(s,wait,e)).
track_option(72,(w,move_forward,n)).
track_option(72,(w,wait,n)).

track_option(2064,(e,move_forward,n)).
track_option(2064,(e,wait,n)).
track_option(2064,(s,move_forward,w)).
track_option(2064,(s,wait,w)).


% Track type 6
track_option(20994,(n,move_right,e)).
track_option(20994,(n,wait,e)).
track_option(20994,(n,move_left,w)).
track_option(20994,(n,wait,w)).
track_option(20994,(n,wait,n)).
track_option(20994,(e,move_forward,s)).
track_option(20994,(e,wait,s)).
track_option(20994,(w,move_forward,s)).
track_option(20994,(w,wait,s)).

track_option(16458,(n,move_forward,e)).
track_option(16458,(n,wait,e)).
track_option(16458,(s,move_forward,e)).
track_option(16458,(s,wait,e)).
track_option(16458,(w,move_right,n)).
track_option(16458,(w,wait,n)).
track_option(16458,(w,move_left,s)).
track_option(16458,(w,wait,s)).
track_option(16458,(w,wait,w)).

track_option(2136,(e,move_forward,n)).
track_option(2136,(e,wait,n)).
track_option(2136,(s,move_left,e)).
track_option(2136,(s,wait,e)).
track_option(2136,(s,move_right,w)).
track_option(2136,(s,wait,w)).
track_option(2136,(s,wait,s)).
track_option(2136,(w,move_forward,n)).
track_option(2136,(w,wait,n)).

track_option(6672,(n,move_forward,w)).
track_option(6672,(n,wait,w)).
track_option(6672,(e,move_left,n)).
track_option(6672,(e,wait,n)).
track_option(6672,(e,move_right,s)).
track_option(6672,(e,wait,s)).
track_option(6672,(e,wait,e)).
track_option(6672,(s,move_forward,w)).
track_option(6672,(s,wait,w)).

% Track type 2
track_option(49186,(n,move_forward,n)).
track_option(49186,(n,wait,n)).
track_option(49186,(n,move_right,e)).
track_option(49186,(n,wait,e)).
track_option(49186,(n,wait,n)).
track_option(49186,(s,move_forward,s)).
track_option(49186,(s,wait,s)).
track_option(49186,(w,move_forward,s)).
track_option(49186,(w,wait,s)).

track_option(1097,(e,move_forward,e)).
track_option(1097,(e,wait,e)).
track_option(1097,(s,move_forward,e)).
track_option(1097,(s,wait,e)).
track_option(1097,(w,move_right,n)).
track_option(1097,(w,wait,n)).
track_option(1097,(w,move_forward,w)).
track_option(1097,(w,wait,w)).
track_option(1097,(w,wait,w)).

track_option(34864,(n,move_forward,n)).
track_option(34864,(n,wait,n)).
track_option(34864,(e,move_forward,n)).
track_option(34864,(e,wait,n)).
track_option(34864,(s,move_forward,s)).
track_option(34864,(s,wait,s)).
track_option(34864,(s,move_right,w)).
track_option(34864,(s,wait,w)).
track_option(34864,(s,wait,s)).

track_option(5633,(n,move_forward,w)).
track_option(5633,(n,wait,w)).
track_option(5633,(e,move_forward,e)).
track_option(5633,(e,wait,e)).
track_option(5633,(e,move_right,s)).
track_option(5633,(e,wait,s)).
track_option(5633,(e,wait,e)).
track_option(5633,(w,move_forward,w)).
track_option(5633,(w,wait,w)).

track_option(37408,(n,move_forward,n)).
track_option(37408,(n,wait,n)).
track_option(37408,(n,move_left,w)).
track_option(37408,(n,wait,w)).
track_option(37408,(n,wait,n)).
track_option(37408,(e,move_forward,s)).
track_option(37408,(e,wait,s)).
track_option(37408,(s,move_forward,s)).
track_option(37408,(s,wait,s)).

track_option(17411,(n,move_forward,e)).
track_option(17411,(n,wait,e)).
track_option(17411,(e,move_forward,e)).
track_option(17411,(e,wait,e)).
track_option(17411,(w,move_left,s)).
track_option(17411,(w,wait,s)).
track_option(17411,(w,move_forward,w)).
track_option(17411,(w,wait,w)).
track_option(17411,(w,wait,w)).

track_option(32872,(n,move_forward,n)).
track_option(32872,(n,wait,n)).
track_option(32872,(s,move_left,e)).
track_option(32872,(s,wait,e)).
track_option(32872,(s,move_forward,s)).
track_option(32872,(s,wait,s)).
track_option(32872,(s,wait,s)).
track_option(32872,(w,move_forward,n)).
track_option(32872,(w,wait,n)).

track_option(3089,(e,move_left,n)).
track_option(3089,(e,wait,n)).
track_option(3089,(e,move_forward,e)).
track_option(3089,(e,wait,e)).
track_option(3089,(e,wait,e)).
track_option(3089,(s,move_forward,w)).
track_option(3089,(s,wait,w)).
track_option(3089,(w,move_forward,w)).
track_option(3089,(w,wait,w)).

% Track type 3
track_option(33825,(n,move_forward,n)).
track_option(33825,(n,wait,n)).
track_option(33825,(e,move_forward,e)).
track_option(33825,(e,wait,e)).
track_option(33825,(s,move_forward,s)).
track_option(33825,(s,wait,s)).
track_option(33825,(w,move_forward,w)).
track_option(33825,(w,wait,w)).

% Track type 4
track_option(38433,(n,move_forward,n)).
track_option(38433,(n,wait,n)).
track_option(38433,(n,move_left,w)).
track_option(38433,(n,wait,w)).
track_option(38433,(n,wait,n)).
track_option(38433,(e,move_forward,e)).
track_option(38433,(e,wait,e)).
track_option(38433,(e,move_right,s)).
track_option(38433,(e,wait,s)).
track_option(38433,(e,wait,e)).
track_option(38433,(s,move_forward,s)).
track_option(38433,(s,wait,s)).
track_option(38433,(w,move_forward,w)).
track_option(38433,(w,wait,w)).

track_option(50211,(n,move_forward,n)).
track_option(50211,(n,wait,n)).
track_option(50211,(n,move_right,e)).
track_option(50211,(n,wait,e)).
track_option(50211,(n,wait,n)).
track_option(50211,(e,move_forward,e)).
track_option(50211,(e,wait,e)).
track_option(50211,(s,move_forward,s)).
track_option(50211,(s,wait,s)).
track_option(50211,(w,move_left,s)).
track_option(50211,(w,wait,s)).
track_option(50211,(w,move_forward,w)).
track_option(50211,(w,wait,w)).
track_option(50211,(w,wait,w)).

track_option(33897,(n,move_forward,n)).
track_option(33897,(n,wait,n)).
track_option(33897,(e,move_forward,e)).
track_option(33897,(e,wait,e)).
track_option(33897,(s,move_left,e)).
track_option(33897,(s,wait,e)).
track_option(33897,(s,move_forward,s)).
track_option(33897,(s,wait,s)).
track_option(33897,(s,wait,s)).
track_option(33897,(w,move_right,n)).
track_option(33897,(w,wait,n)).
track_option(33897,(w,move_forward,w)).
track_option(33897,(w,wait,w)).
track_option(33897,(w,wait,w)).

track_option(35889,(n,move_forward,n)).
track_option(35889,(n,wait,n)).
track_option(35889,(e,move_left,n)).
track_option(35889,(e,wait,n)).
track_option(35889,(e,move_forward,e)).
track_option(35889,(e,wait,e)).
track_option(35889,(e,wait,e)).
track_option(35889,(s,move_forward,s)).
track_option(35889,(s,wait,s)).
track_option(35889,(s,move_right,w)).
track_option(35889,(s,wait,w)).
track_option(35889,(s,wait,s)).
track_option(35889,(w,move_forward,w)).
track_option(35889,(w,wait,w)).

% Track type 5
track_option(38505,(n,move_forward,n)).
track_option(38505,(n,wait,n)).
track_option(38505,(n,move_left,w)).
track_option(38505,(n,wait,w)).
track_option(38505,(n,wait,n)).
track_option(38505,(e,move_forward,e)).
track_option(38505,(e,wait,e)).
track_option(38505,(e,move_right,s)).
track_option(38505,(e,wait,s)).
track_option(38505,(e,wait,e)).
track_option(38505,(s,move_left,e)).
track_option(38505,(s,wait,e)).
track_option(38505,(s,move_forward,s)).
track_option(38505,(s,wait,s)).
track_option(38505,(s,wait,s)).
track_option(38505,(w,move_right,n)).
track_option(38505,(w,wait,n)).
track_option(38505,(w,move_forward,w)).
track_option(38505,(w,wait,w)).
track_option(38505,(w,wait,w)).

track_option(52275,(n,move_forward,n)).
track_option(52275,(n,wait,n)).
track_option(52275,(n,move_right,e)).
track_option(52275,(n,wait,e)).
track_option(52275,(n,wait,n)).
track_option(52275,(e,move_left,n)).
track_option(52275,(e,wait,n)).
track_option(52275,(e,move_forward,e)).
track_option(52275,(e,wait,e)).
track_option(52275,(e,wait,e)).
track_option(52275,(s,move_forward,s)).
track_option(52275,(s,wait,s)).
track_option(52275,(s,move_right,w)).
track_option(52275,(s,wait,w)).
track_option(52275,(s,wait,s)).
track_option(52275,(w,move_left,s)).
track_option(52275,(w,wait,s)).
track_option(52275,(w,move_forward,w)).
track_option(52275,(w,wait,w)).
track_option(52275,(w,wait,w)).

node_track(T) :- C > 4, C = #count{ D: track_option(T,D) }, track_option(T, _).

ns(n). ns(s). ew(e). ew(w).

dir(ns). dir(ew). dir(ne). dir(se). dir(sw). dir(nw).

option((X,Y),(IN,M,OUT)) :- track_option(Track, (IN,M,OUT)),  cell((X,Y), Track), not M=wait. % map the general track options to the current flatland environment in the form of 'option' atoms
